---
import LinkWrapper from '@components/ui/LinkWrapper.astro';
import { CLASS } from '@config/class.ts';
import { SITE } from '@config/site.ts';
import { getLocale, getLocaleMessages } from '@i18n/index.ts';
import Logo from '@images/logo.svg';
import type { WithChildren } from '@type/utils.ts';
import type { HTMLAttributes } from 'astro/types';
import { getRelativeLocaleUrl } from 'astro:i18n';

/**
 * Props for the site header with logo and description.
 *
 * Explicitly disallows children as header content is predefined.
 */
type Props = WithChildren<false, HTMLAttributes<'header'>>;

const currentLocaleId = getLocale(Astro);
const msg = getLocaleMessages(currentLocaleId);

const props = Astro.props;
---

<header {...props}>
	<LinkWrapper
		to={getRelativeLocaleUrl(currentLocaleId)}
		aria-label={msg.header.label}
		hreflang={currentLocaleId}
	>
		<Logo />
		<h1 class={CLASS.visuallyHidden}>
			{SITE.title}
		</h1>
	</LinkWrapper>
	<p>
		{msg.site.description}
	</p>
</header>

<style>
	header {
		display: flex;
		width: 100%;
		max-width: var(--max-w);
		flex-direction: column;
		align-items: center;
		width: fit-content;
		margin-block-start: var(--p-lg);
		margin-inline: var(--p-md);
		view-transition-name: header;

		svg {
			width: 10rem;
			height: fit-content;
			filter: var(--s-drop-md);
		}

		> p {
			padding: 0 var(--p-md);
			text-wrap-style: balance;
			text-align: center;
			view-transition-name: header-description;
		}
	}
</style>
