---
import type { WithChildren } from '@type/utils.ts';
import { clsx } from '@utils/dom.ts';
import type { HTMLTag, Polymorphic } from 'astro/types';

/**
 * Props for a polymorphic card container with rounded corners and shadow.
 *
 * @typeParam Tag - The HTML element type to render as (default: 'div')
 * @property as - The HTML element type to render as (default: 'div')
 */
type Props<Tag extends HTMLTag = HTMLTag> = WithChildren<
	true,
	Polymorphic<{
		as: Tag;
	}>
>;

const { as: Tag = 'div', class: className, ...restProps } = Astro.props;
---

<!-- This must be on the same line to prevent whitespace from being inserted -->
<Tag {...restProps} class={clsx('card', className)}><slot /></Tag>

<style>
	.card {
		border-radius: var(--r-md);
		box-shadow: var(--s-box-md);
		overflow: hidden;
		contain: paint;

		/* Outlines are cut off when using `overflow: hidden` so use a negative offset instead */
		> * {
			outline-offset: calc(-1 * var(--p-xs));
		}
	}
</style>
