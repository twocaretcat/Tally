---
import { INPUT } from '@config/input.ts';
import type { OutputId } from '@config/output.ts';
import { getLocale, getLocaleMessages } from '@i18n/index.ts';
import type { WithChildren } from '@type/utils.ts';
import { wKey } from '@utils/dom.ts';
import type { HTMLAttributes } from 'astro/types';

/**
 * Props for a standalone output element displaying a text statistic.
 *
 * Explicitly disallows children as the output value is controlled programmatically.
 *
 * @property id - The output field ID (e.g., 'words', 'characters')
 */
interface Props extends WithChildren<
	false,
	Omit<HTMLAttributes<'output'>, 'id'>
> {
	id: OutputId;
}

const msg = getLocaleMessages(getLocale(Astro)).output.placeholder;

const { id, ...restProps } = Astro.props;
---

<output {...restProps} {...wKey(id, 'output')} {id} name={id} for={INPUT.id}>
	{msg}
</output>

<style>
	@keyframes pulse {
		0% {
			transform: scale(1.1);
		}
		100% {
			transform: scale(1);
		}
	}

	output {
		font-family: var(--f-header);
		font-size: var(--f-lg);
		font-weight: var(--f-bold);
		contain: content;
	}

	.pulse {
		animation: pulse var(--d-md) ease-out;
	}
</style>
